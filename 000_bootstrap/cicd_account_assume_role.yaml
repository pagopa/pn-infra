AWSTemplateFormatVersion: "2010-09-09"
Parameters:
  EnvName:
    Type: String
    Description: Nome dell'ambiente destinazione
  TargetRole:
    Type: String
    Description: ARN del ruolo da assumere per agire nell'ambiente destinazione
  
Resources:
  CiCdGroup:
    Type: AWS::IAM::Group
    Properties: 
      GroupName: !Join [ "", [ {Ref: EnvName}, "CiCdUsersGroup" ] ]
      Path: /
      Policies: 
        - PolicyName: !Join [ "", [ "Impersonate-", {Ref: EnvName}, "-CiCdRole" ] ]
          PolicyDocument:
            Version: '2012-10-17'
            Statement:
              - Effect: Allow
                Action:
                  - "sts:AssumeRole"
                Resource: {Ref: TargetRole}


